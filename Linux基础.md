# Linux基础



## 一、Linux目录结构及文件



### 1.Linux目录结构：树形的分层组织结构

| /     | 根目录                                             |
| ----- | -------------------------------------------------- |
| /bin  | 存放必要的命令                                     |
| /boot | 存放内核以及启动所需的文件                         |
| /dev  | 存放设备文件                                       |
| /etc  | 存放系统配置文件                                   |
| /home | 普通用户的宿主目录，用户数据，存放在其主目录中     |
| /lib  | 存放必要的运行库                                   |
| /mnt  | 存放临时的映射文件系统，通常用来挂载使用           |
| /proc | 存放存储进程和系统信息                             |
| /root | 超级用户的主目录                                   |
| /sbin | 存放系统管理程序                                   |
| /tmp  | 存放临时文件                                       |
| /usr  | 存放应用程序，命令程序文件，程序库，手册和其他文档 |
| /var  | 系统默认日志存放目录                               |



### 2.Linux 文件分类

| 普通文件       | Linux中最多的一种文件类型，包括纯文本文件(ASCII);二进制文件(binary);数据格式文件(data);各种压缩文件。第一个属性为[-] |
| -------------- | ------------------------------------------------------------ |
| **目录文件**   | **就是目录，能用cd命令进入的。第一个属性为[d],例如[drwxrwxrwx]** |
| **设备文件**   | **字符设备文件：即串行端口的接口设备，例如键盘、鼠标等等。第一个属性为[c]**  **块设备文件： 就是存储数据以供系统存取的接口设备，简单而言就是硬盘。例如一号硬盘的代码是 /dev/hda1 等文件。第一个属性为 [b]** |
| **链接文件**   | **类似Windows下的快捷方式。第一个属性为[l],例如[lrwxrwxrwx]** |
| **管道文件**   | **管道文件主要用于在进程间传递数据的一种特殊文件。第一个属性为 [p]** |
| **套接字文件** | **主要用于不同计算机间网络通信的一种特殊文件。第一个属性为[s]，最常在/var/run 目录中看到这种文件类型。** |

 

## 二、Linux文件权限简单说明

### 1.用户组

在Linux 中的每个用户必须属于一个组，不能独立于组外

在Linux 中的每个文件有所有者、所有组、其他组的概念



### 2.所有者

一般为文件的创建者，谁创建了该文件，就天然成为该文件的所有者

用 `ls -l`  命令可以看到文件的所有者



### 3.文件所在组

当某个用户创建一个文件后，这个文件的所有组就是该用户所在的组

用 `ls -l` 命令可以看到文件的所在组



### 4.其他组

除开文件的所有者和所在组的用户外，系统的其他用户都是文件的其他组



<img src=".\.assets\1.png" style="zoom:65%;" />

### 5.改变权限的命令

   chmod 改变文件或目录的权限

   chmod 755 xxx：赋予xxx文件权限rwxr-xr-x

   chmod u=rwx,g=rx,o=rx xxx：同上u=用户权限，g=组权限，o=不同组其他用户权限

   chmod u-x,g+w xxx：给xxx文件去除用户执行的权限，增加组写的权限

   chmod a+r xxx：给所有用户添加读的权限



## 三、Linux常用命令的使用

### 1.Linux 命令格式

command  [-options]  [parameter1]  … 
说明：
command：命令名，相应功能的英文单词或单词的缩写
[-options]：选项，可用来对命令进行控制，也可以省略
parameter1 …：传给命令的参数，可以是零个一个或多个

### 2.Linux命令

- cd -- 切换目录
- clear -- 清屏 
- help -- 帮助
- pwd -- 显示当前工作目录
- ls: -- 显示文件和目录列表 
- ls -a  -- 显示所有文件及目录（ls内定将文件名或目录名称为“.”的视为隐藏，不会列出）
- ls -l    -- 以长格式显示目录下的内容列表。输出的信息从左到右依次包括文件名，文件类型、权限模式、硬连接数、所有者、组、文件大小和文件的最后修改时间等
- ls -t	-- 按时间进行文件的排序  Time(时间)
- mkdir -- 创建目录
- mkdir -p -- 若所要建立目录的上层目录目前尚未建立，则会一并建立上层目录
- touch  -- 创建文件；把已存在文件的时间标签更新为系统当前的时间，内容不变  
- rm -- 删除文件或者目录
- rm -r或-R -- 递归处理，将指定目录下的所有文件与子目录一并处理
- rm –f -- 强制删除文件或目录
- cp   -- 复制文件或目录
- cp –r -- 若给出的源文件是一个目录文件，此时将复制该目录下所有的子目录和文件
- cp –p -- 除复制文件的内容外，还把修改时间和访问权限也复制到新文件中
- mv -- 重命名或者移动文件或者目录 
- cat  -- 查看文件内容 
- ifconfig -- 查看ip 
- chmod  -- 文件/目录权限设置命令



## 四、Linux常用编辑器之vim



### **1.vi/vim** **的使用**

基本上 vi/vim 共分为三种模式，分别是命令模式（Command mode），插入模式（Insert mode）和底线命令模式（Last line mode）。



### 2.命令模式

用户刚刚启动 vi/vim，便进入了命令模式。
此状态下敲击键盘动作会被Vim识别为命令，而非输入字符。比如我们此时按下i，并不会输入一个字符，i被当作了一个命令。

### 3.插入模式

在命令模式下按下i就进入了插入模式。

在插入模式中，可以使用以下按键：

- 字符按键以及Shift组合，输入字符

- ENTER，回车键，换行

- BACK SPACE，退格键，删除光标前一个字符

- DEL，删除键，删除光标后一个字符

- 方向键，在文本中移动光标

- HOME/END，移动光标到行首/行尾

- Page Up/Page Down，上/下翻页

- Insert，切换光标为输入/替换模式

- ESC，退出插入模式，切换到命令模式

  

### 4.底线命令模式

在命令模式下按下:（英文冒号）就进入了底线命令模式。
底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。

在底线命令模式中：

- q 退出程序
- w 保存文件
- 按ESC键可随时退出底线命令模式。



### 5.扩展命令

- 由命令模式切换到插入模式
  	a 从光标当前位置的下一个字符开始插入 
    	o 在光标位置的下行插入一个空行，再进行插入
    	I 从光标所在行的开头开始插入正文
    	A 从光标所在行的末尾开始插入正文
    	O 在光标位置的上一行插入一个空行，再进行插入
- 命令模式下删除和修改文本
  	u     撤消前面多次修改。
    	[n]x  删除光标后 n 个字符。
    	[n]X  删除光标前 n 个字符。
    	[n]dd 删除从当前行开始的 n 行（准确来讲，是剪切，剪切不粘贴即为删除）。
    	[n]yy 复制从当前行开始的 n 行。
    	p把粘贴板上的内容插入到当前行。
    	.执行上一次操作
    	shift +zz ( 按住 shift 按两下 z 键 ) 保存退出当前文件
- 底线命令模式下的多行剪切、复制
  	:n1,n2 d     剪切 n1 到 n2 行之间的内容到粘贴板
    	:n1,n2 m n3  剪切 n1 行到 n2 行之间的内容到 n3 行下
    	:n1,n2 co n3  复制 n1 行到 n2 行之间的内容到 n3 行下



## 五、Linux编译器之GCC

### 1.gcc的简介

-  gcc 是 GNU 的 C 和 C++ 编译器。实际上，gcc 能够编译多种语言：C、C++ 和 Object C等。利用 gcc 命令可同时编译并连接 C 和 C++ 源程序。也可以对几个 C 源文件利用 gcc 编译、连接并生成可执行文件。

- gcc可以使程序员灵活地控制编译过程。编译过程一般可以分为下面四个阶段，每个阶段分别调用不同的工具进行处理

  

<img src=".\.assets\2.png" style="zoom:65%;" />



### 2.gcc的四个阶段

- 预处理
  	在该阶段，编译器将C源代码中的包含的头文件如stdio.h编译进来，用户可以使用	gcc的选项”-E”进行查看

	用法：#gcc -E hello.c -o hello.i
	作用：将hello.c预处理输出hello.i文件。
- 编译
  	第二步进行的是编译阶段，在这个阶段中，Gcc首先要检查代码的规范性、是否有	语法错误等，以确定代码的实际要做的工作，在检查无误后，Gcc把代码翻译 成汇	编语言。用户可以使用”-S”选项来进行查看，该选项只进行编译而不进行汇编,生成汇编代码。

	用法：[root]# gcc –S hello.i –o hello.s
	作用：将预处理输出文件hello.i汇编成hello.s文件。


- 汇编
  	汇编阶段是把编译阶段生成的”.s”文件转成二进制目标代码。

	用法：[root]# gcc –c hello.s –o hello.o
	作用：将汇编输出文件hello.s编译输出hello.o文件。

- 链接
  	在成功编译之后，就进入了链接阶段。

	用法：[root]# gcc hello.o –o hello
	作用：将编译输出文件hello.o链接成最终可执行文件hello。


### 3.可执行文件格式

Linux系统中可执行文件有两种格式

第一种格式是a.out格式，这种格式用于早期的Linux系统以及 Unix系统的原始格式。	a.out来自于Unix C编译程序默认的可执行文件名。当使用共享库时，a.out格式就会发	生问题。把a.out格式调整为共享库是一种非常复杂的操作。

因此，一种新的文件格式被引入Unix系统5的第四版本和Solaris系统中。它被称为可执行和连接的格式（ELF）。这种格式很容易实现共享库。
ELF格式已经被Linux系统作为标准的格式采用。

gcc编译程序产生的所有的二进制文件都是ELF格式的文件（即使可执行文件的默认名仍然是a.out）。较旧的a.out格式的程序仍然可以运行在支持ELF格式的系统上。  



### 4.GCC 的基本用法和选项

基本语法
 	gcc [options] [filenames]

其中options就是编译器所需要的参数，filenames给出相关的文件名称。

选项
	-o 选项：你能用 -o 编译选项来为将产生的可执行文件指定一个文件名来代替 a.out。
	     例：gcc –o hello hello.c
	-E 选项：只运行 C 预编译器。 
	     例：gcc –E hello.c -o hello.i
	-S 选项：编译选项告诉 gcc 在为 C 代码产生了汇编语言文件后停止编译。
	     例：gcc –S hello.i –o hello.s
 	-c 选项：告诉GCC仅把源代码编译为目标代码而跳过汇编和连接的步骤。
		  这个选项使用的非常频繁，因为它使得编译多个C程序时速度更快并且更易于管理。缺省时GCC建立的目标代码文件有一个.o的扩展名。
   	     例：gcc  –c  hello.c